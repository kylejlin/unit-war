(this["webpackJsonpunit-war"]=this["webpackJsonpunit-war"]||[]).push([[0],{11:function(e,t,n){e.exports=function(){return new Worker(n.p+"5dd6643fbf650d370444.worker.js")}},12:function(e,t,n){e.exports=function(){return new Worker(n.p+"7ab7a3f8b4487dfbe0f7.worker.js")}},16:function(e,t,n){e.exports=n(23)},21:function(e,t,n){},22:function(e,t,n){},23:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(10),o=n.n(r),l=n(4),s=n(7),u=n(1),c=n(3),h=n(2),p=n(8),d=n(15),g=n(13);function v(e,t,n){for(var a=0,i=0,r=n.hands,o=n.ante,l=0;l<r;l++)if(Math.random()>.5){var s=f(e,t,o);a+=s,i-=s}else{var u=f(t,e,o);i+=u,a-=u}return(a-i)/2}function f(e,t,n){var a=Math.random(),i=Math.random(),r=e.lead(a,i),o=Math.max(n,r[0]),l=Math.max(o,r[1]),s=Math.random(),u=Math.random(),c=Math.max(n,t.follow(s,o,u));return c<o?n:c>l?-o:a>s?c:a<s?-c:0}function m(e){return e>0&&Math.floor(e)===e&&Number.isFinite(e)}function y(e){return e>0&&Number.isFinite(e)}function E(e){return 0<=e&&e<=1}function b(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=0,a=0;0===n;)n=Math.random();for(;0===a;)a=Math.random();var i=Math.sqrt(-2*Math.log(n))*Math.cos(2*Math.PI*a);return t*i+e}var A=function(){function e(t,n){Object(c.a)(this,e),this.leaderNetwork=t,this.followerNetwork=n,this.agentType=void 0,this.inputs=void 0,this.agentType=U.Artichoke,this.inputs=new Float64Array(3)}return Object(h.a)(e,[{key:"lead",value:function(e,t){var n=this.inputs;return n[0]=e,n[1]=t,this.leaderNetwork.evaluate(n)}},{key:"follow",value:function(e,t,n){var a=this.inputs;return a[0]=e,a[1]=t,a[2]=n,this.followerNetwork.evaluate(a)[0]}},{key:"train",value:function(e,t){this.leaderNetwork.train(this,e,t),this.followerNetwork.train(this,e,t)}},{key:"toArrayBuffer",value:function(){var e=new Float64Array(this.leaderNetwork.toArrayBuffer()),t=new Float64Array(this.followerNetwork.toArrayBuffer()),n=new Float64Array(3+e.length+t.length);return n[0]=this.agentType,n[1]=e.length,n[2]=t.length,n.set(e,3),n.set(t,3+e.length),n.buffer}}],[{key:"fromCreationOptions",value:function(t){return e.fromHiddenLayerSize(t.hiddenLayerSize)}},{key:"fromHiddenLayerSize",value:function(t){return new e(C.fromLayerSizes(2,t,2),C.fromLayerSizes(3,t,1))}},{key:"fromArrayBuffer",value:function(t){var n=new Float64Array(t),a=n[1],i=n[2];return new e(C.fromArrayBuffer(n.slice(3,3+a).buffer),C.fromArrayBuffer(n.slice(3+a,3+a+i).buffer))}}]),e}(),C=function(){function e(t,n,a){Object(c.a)(this,e),this.buffer=void 0,this.inputSize=void 0,this.hiddenSize=void 0,this.outputSize=void 0,this.hiddenWeights=void 0,this.hiddenBiases=void 0,this.hiddenActivations=void 0,this.outputWeights=void 0,this.outputBiases=void 0,this.outputActivations=void 0,this.updatedHiddenWeights=void 0,this.updatedHiddenBiases=void 0,this.updatedOutputWeights=void 0,this.updatedOutputBiases=void 0;var i=n*t,r=n,o=n,l=a*n,s=a,u=a,h=new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT*(i+r+o+l+s+u+i+r+l+s));this.buffer=h,this.inputSize=t,this.hiddenSize=n,this.outputSize=a,this.hiddenWeights=new Float64Array(h,0,i),this.hiddenBiases=new Float64Array(h,Float64Array.BYTES_PER_ELEMENT*i,r),this.hiddenActivations=new Float64Array(h,Float64Array.BYTES_PER_ELEMENT*(i+r),o),this.outputWeights=new Float64Array(h,Float64Array.BYTES_PER_ELEMENT*(i+r+o),l),this.outputBiases=new Float64Array(h,Float64Array.BYTES_PER_ELEMENT*(i+r+o+l),s),this.outputActivations=new Float64Array(h,Float64Array.BYTES_PER_ELEMENT*(i+r+o+l+s),u),this.updatedHiddenWeights=new Float64Array(h,Float64Array.BYTES_PER_ELEMENT*(i+r+o+l+s+u),i),this.updatedHiddenBiases=new Float64Array(h,Float64Array.BYTES_PER_ELEMENT*(i+r+o+l+s+u+i),r),this.updatedOutputWeights=new Float64Array(h,Float64Array.BYTES_PER_ELEMENT*(i+r+o+l+s+u+i+r),l),this.updatedOutputBiases=new Float64Array(h,Float64Array.BYTES_PER_ELEMENT*(i+r+o+l+s+u+i+r+l),s),this.initializeWeights()}return Object(h.a)(e,null,[{key:"fromLayerSizes",value:function(t,n,a){return new e(t,n,a)}},{key:"fromArrayBuffer",value:function(t){var n=new Float64Array(t),a=n[0],i=n[1],r=n[2],o=i*a,l=i,s=n.subarray(3,3+o),u=n.subarray(3+o,3+o+l),c=r*i,h=r,p=n.subarray(3+o+l,3+o+l+c),d=n.subarray(3+o+l+c,3+o+l+c+h),g=new e(a,i,r);return g.hiddenWeights.set(s),g.hiddenBiases.set(u),g.outputWeights.set(p),g.outputBiases.set(d),g}}]),Object(h.a)(e,[{key:"initializeWeights",value:function(){k(this.hiddenWeights,this.inputSize),k(this.outputWeights,this.hiddenSize)}},{key:"evaluate",value:function(e){for(var t,n=this.inputSize,a=this.hiddenSize,i=this.outputSize,r=this.hiddenWeights,o=this.hiddenBiases,l=this.hiddenActivations,s=this.outputWeights,u=this.outputBiases,c=this.outputActivations,h=0;h<a;h++){for(var p=0,d=0;d<n;d++)p+=r[h*n+d]*e[d];l[h]=(t=p+o[h],Math.max(0,t))}for(var g=0;g<i;g++){for(var v=0,f=0;f<a;f++)v+=s[g*a+f]*l[f];c[g]=O(v+u[g])}return c}},{key:"train",value:function(e,t,n){for(var a=n.evaluationOptions,i=v(e,t,a),r=this.hiddenWeights,o=this.updatedHiddenWeights,l=this.hiddenBiases,s=this.updatedHiddenBiases,u=this.outputWeights,c=this.updatedOutputWeights,h=this.outputBiases,p=this.updatedOutputBiases,d=n.derivativeStep,g=n.learningRate,f=r.length,m=0;m<f;m++){var y=r[m];r[m]+=d;var E=(v(e,t,a)-i)/d;o[m]=y+E*g,r[m]=y}for(var b=l.length,A=0;A<b;A++){var C=l[A];l[A]+=d;var k=(v(e,t,a)-i)/d;s[A]=C+k*g,l[A]=C}for(var O=u.length,w=0;w<O;w++){var S=u[w];u[w]+=d;var B=(v(e,t,a)-i)/d;c[w]=S+B*g,u[w]=S}for(var T=h.length,N=0;N<T;N++){var F=h[N];h[N]+=d;var j=(v(e,t,a)-i)/d;p[N]=F+j*g,h[N]=F}r.set(o),l.set(s),u.set(c),h.set(p)}},{key:"toArrayBuffer",value:function(){var e=this.inputSize,t=this.hiddenSize,n=this.outputSize,a=this.hiddenWeights,i=this.hiddenBiases,r=this.outputWeights,o=this.outputBiases,l=new Float64Array(3+a.length+i.length+r.length+o.length);return l[0]=e,l[1]=t,l[2]=n,l.set(a,3),l.set(i,3+a.length),l.set(r,3+a.length+i.length),l.set(o,3+a.length+i.length+r.length),l.buffer}}]),e}();function k(e,t){for(var n=0;n<e.length;n++)e[n]=b(0,1/Math.sqrt(t))}function O(e){return 1/(1+Math.exp(-e))}var w=function(){var e=new Uint32Array([2864434397]),t=new Uint16Array(e.buffer);if(43707===t[0]&&52445===t[1])return!0;if(43707===t[1]&&52445===t[0])return!1;throw new Error("Could not detect endianness.")}()?function(e,t){T[0]=e*S,t[0]=N[0]/B,t[1]=N[1]/B}:function(e,t){T[0]=e*S,t[0]=N[1]/B,t[1]=N[0]/B};var S=Math.pow(2,32),B=Math.pow(2,16),T=new Uint32Array(1),N=new Uint16Array(T.buffer);var F=function(){function e(){Object(c.a)(this,e),this.agentType=void 0,this.leadOutput=void 0,this.agentType=U.Broccoli,this.leadOutput=new Float64Array(2)}return Object(h.a)(e,null,[{key:"fromCreationOptions",value:function(t){return new e}},{key:"fromArrayBuffer",value:function(t){return new e}}]),Object(h.a)(e,[{key:"lead",value:function(e,t){var n=this.leadOutput;return w(t,n),n}},{key:"follow",value:function(e,t,n){return n}},{key:"train",value:function(){}},{key:"toArrayBuffer",value:function(){return new Float64Array([U.Broccoli]).buffer}}]),e}();var j=function(){function e(){Object(c.a)(this,e),this.agentType=void 0,this.leadOutput=void 0,this.agentType=U.Carrot,this.leadOutput=new Float64Array(2)}return Object(h.a)(e,null,[{key:"fromCreationOptions",value:function(t){return new e}},{key:"fromArrayBuffer",value:function(t){return new e}}]),Object(h.a)(e,[{key:"lead",value:function(e){var t=this.leadOutput;return t[0]=e,t[1]=e,t}},{key:"follow",value:function(e){return e}},{key:"train",value:function(){}},{key:"toArrayBuffer",value:function(){return new Float64Array([U.Carrot]).buffer}}]),e}();var M=function(){function e(t){Object(c.a)(this,e),this.agentType=void 0,this.leadOutput=void 0,this.agentType=U.Daikon,this.leadOutput=new Float64Array([t,t])}return Object(h.a)(e,[{key:"lead",value:function(){return this.leadOutput}},{key:"follow",value:function(){return this.leadOutput[0]}},{key:"train",value:function(){}},{key:"toArrayBuffer",value:function(){var e=this.leadOutput[0];return new Float64Array([U.Daikon,e]).buffer}}],[{key:"fromCreationOptions",value:function(t){return new e(t.bet)}},{key:"fromArrayBuffer",value:function(t){return new e(new Float64Array(t)[1])}}]),e}();var I=function(){function e(){Object(c.a)(this,e),this.agentType=void 0,this.leadOutput=void 0,this.agentType=U.Eggplant,this.leadOutput=new Float64Array(2)}return Object(h.a)(e,null,[{key:"fromCreationOptions",value:function(t){return new e}},{key:"fromArrayBuffer",value:function(t){return new e}}]),Object(h.a)(e,[{key:"lead",value:function(e){var t=this.leadOutput;return t[0]=e,t[1]=e>.5?1:0,t}},{key:"follow",value:function(e,t){return e>.5?Math.max(e,t):e}},{key:"train",value:function(){}},{key:"toArrayBuffer",value:function(){return new Float64Array([U.Eggplant]).buffer}}]),e}();var L=function(){function e(t,n){Object(c.a)(this,e),this.leaderNetwork=t,this.followerNetwork=n,this.agentType=void 0,this.inputs=void 0,this.agentType=U.Fig,this.inputs=new Float64Array(3)}return Object(h.a)(e,[{key:"lead",value:function(e,t){var n=this.inputs;return n[0]=e,n[1]=t,this.leaderNetwork.evaluate(n)}},{key:"follow",value:function(e,t,n){var a=this.inputs;return a[0]=e,a[1]=t,a[2]=n,this.followerNetwork.evaluate(a)[0]}},{key:"train",value:function(e,t){var n=this.leaderNetwork,a=this.followerNetwork;n.trainWithoutUpdating(this,e,t),a.trainWithoutUpdating(this,e,t),n.update(),a.update()}},{key:"toArrayBuffer",value:function(){var e=new Float64Array(this.leaderNetwork.toArrayBuffer()),t=new Float64Array(this.followerNetwork.toArrayBuffer()),n=new Float64Array(3+e.length+t.length);return n[0]=this.agentType,n[1]=e.length,n[2]=t.length,n.set(e,3),n.set(t,3+e.length),n.buffer}}],[{key:"fromCreationOptions",value:function(t){return e.fromHiddenLayerSize(t.hiddenLayerSize)}},{key:"fromHiddenLayerSize",value:function(t){return new e(x.fromLayerSizes(2,t,2),x.fromLayerSizes(3,t,1))}},{key:"fromArrayBuffer",value:function(t){var n=new Float64Array(t),a=n[1],i=n[2];return new e(x.fromArrayBuffer(n.slice(3,3+a).buffer),x.fromArrayBuffer(n.slice(3+a,3+a+i).buffer))}}]),e}(),x=function(){function e(t,n,a){Object(c.a)(this,e),this.buffer=void 0,this.inputSize=void 0,this.hiddenSize=void 0,this.outputSize=void 0,this.hiddenWeights=void 0,this.hiddenBiases=void 0,this.hiddenActivations=void 0,this.outputWeights=void 0,this.outputBiases=void 0,this.outputActivations=void 0,this.updatedHiddenWeights=void 0,this.updatedHiddenBiases=void 0,this.updatedOutputWeights=void 0,this.updatedOutputBiases=void 0;var i=n*t,r=n,o=n,l=a*n,s=a,u=a,h=new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT*(i+r+o+l+s+u+i+r+l+s));this.buffer=h,this.inputSize=t,this.hiddenSize=n,this.outputSize=a,this.hiddenWeights=new Float64Array(h,0,i),this.hiddenBiases=new Float64Array(h,Float64Array.BYTES_PER_ELEMENT*i,r),this.hiddenActivations=new Float64Array(h,Float64Array.BYTES_PER_ELEMENT*(i+r),o),this.outputWeights=new Float64Array(h,Float64Array.BYTES_PER_ELEMENT*(i+r+o),l),this.outputBiases=new Float64Array(h,Float64Array.BYTES_PER_ELEMENT*(i+r+o+l),s),this.outputActivations=new Float64Array(h,Float64Array.BYTES_PER_ELEMENT*(i+r+o+l+s),u),this.updatedHiddenWeights=new Float64Array(h,Float64Array.BYTES_PER_ELEMENT*(i+r+o+l+s+u),i),this.updatedHiddenBiases=new Float64Array(h,Float64Array.BYTES_PER_ELEMENT*(i+r+o+l+s+u+i),r),this.updatedOutputWeights=new Float64Array(h,Float64Array.BYTES_PER_ELEMENT*(i+r+o+l+s+u+i+r),l),this.updatedOutputBiases=new Float64Array(h,Float64Array.BYTES_PER_ELEMENT*(i+r+o+l+s+u+i+r+l),s),this.initializeWeights()}return Object(h.a)(e,null,[{key:"fromLayerSizes",value:function(t,n,a){return new e(t,n,a)}},{key:"fromArrayBuffer",value:function(t){var n=new Float64Array(t),a=n[0],i=n[1],r=n[2],o=i*a,l=i,s=n.subarray(3,3+o),u=n.subarray(3+o,3+o+l),c=r*i,h=r,p=n.subarray(3+o+l,3+o+l+c),d=n.subarray(3+o+l+c,3+o+l+c+h),g=new e(a,i,r);return g.hiddenWeights.set(s),g.hiddenBiases.set(u),g.outputWeights.set(p),g.outputBiases.set(d),g}}]),Object(h.a)(e,[{key:"initializeWeights",value:function(){W(this.hiddenWeights,this.inputSize),W(this.outputWeights,this.hiddenSize)}},{key:"evaluate",value:function(e){for(var t,n=this.inputSize,a=this.hiddenSize,i=this.outputSize,r=this.hiddenWeights,o=this.hiddenBiases,l=this.hiddenActivations,s=this.outputWeights,u=this.outputBiases,c=this.outputActivations,h=0;h<a;h++){for(var p=0,d=0;d<n;d++)p+=r[h*n+d]*e[d];l[h]=(t=p+o[h],Math.max(0,t))}for(var g=0;g<i;g++){for(var v=0,f=0;f<a;f++)v+=s[g*a+f]*l[f];c[g]=z(v+u[g])}return c}},{key:"trainWithoutUpdating",value:function(e,t,n){for(var a=n.evaluationOptions,i=v(e,t,a),r=this.hiddenWeights,o=this.updatedHiddenWeights,l=this.hiddenBiases,s=this.updatedHiddenBiases,u=this.outputWeights,c=this.updatedOutputWeights,h=this.outputBiases,p=this.updatedOutputBiases,d=n.derivativeStep,g=n.learningRate,f=r.length,m=0;m<f;m++){var y=r[m];r[m]+=d;var E=(v(e,t,a)-i)/d;o[m]=y+E*g,r[m]=y}for(var b=l.length,A=0;A<b;A++){var C=l[A];l[A]+=d;var k=(v(e,t,a)-i)/d;s[A]=C+k*g,l[A]=C}for(var O=u.length,w=0;w<O;w++){var S=u[w];u[w]+=d;var B=(v(e,t,a)-i)/d;c[w]=S+B*g,u[w]=S}for(var T=h.length,N=0;N<T;N++){var F=h[N];h[N]+=d;var j=(v(e,t,a)-i)/d;p[N]=F+j*g,h[N]=F}}},{key:"update",value:function(){var e=this.hiddenWeights,t=this.updatedHiddenWeights,n=this.hiddenBiases,a=this.updatedHiddenBiases,i=this.outputWeights,r=this.updatedOutputWeights,o=this.outputBiases,l=this.updatedOutputBiases;e.set(t),n.set(a),i.set(r),o.set(l)}},{key:"toArrayBuffer",value:function(){var e=this.inputSize,t=this.hiddenSize,n=this.outputSize,a=this.hiddenWeights,i=this.hiddenBiases,r=this.outputWeights,o=this.outputBiases,l=new Float64Array(3+a.length+i.length+r.length+o.length);return l[0]=e,l[1]=t,l[2]=n,l.set(a,3),l.set(i,3+a.length),l.set(r,3+a.length+i.length),l.set(o,3+a.length+i.length+r.length),l.buffer}}]),e}();function W(e,t){for(var n=0;n<e.length;n++)e[n]=b(0,1/Math.sqrt(t))}function z(e){return 1/(1+Math.exp(-e))}var V=function(){function e(t,n){Object(c.a)(this,e),this.leaderNetwork=t,this.followerNetwork=n,this.agentType=void 0,this.inputs=void 0,this.agentType=U.Grape,this.inputs=new Float64Array(3)}return Object(h.a)(e,[{key:"lead",value:function(e,t){var n=this.inputs;return n[0]=2*e-1,n[1]=2*t-1,this.leaderNetwork.evaluate(n)}},{key:"follow",value:function(e,t,n){var a=this.inputs;return a[0]=2*e-1,a[1]=2*t-1,a[2]=2*n-1,this.followerNetwork.evaluate(a)[0]}},{key:"train",value:function(e,t){var n=this.leaderNetwork,a=this.followerNetwork;n.trainWithoutUpdating(this,e,t),a.trainWithoutUpdating(this,e,t),n.update(),a.update()}},{key:"toArrayBuffer",value:function(){var e=new Float64Array(this.leaderNetwork.toArrayBuffer()),t=new Float64Array(this.followerNetwork.toArrayBuffer()),n=new Float64Array(3+e.length+t.length);return n[0]=this.agentType,n[1]=e.length,n[2]=t.length,n.set(e,3),n.set(t,3+e.length),n.buffer}}],[{key:"fromCreationOptions",value:function(t){return e.fromHiddenLayerSize(t.hiddenLayerSize)}},{key:"fromHiddenLayerSize",value:function(t){return new e(P.fromLayerSizes(2,t,2),P.fromLayerSizes(3,t,1))}},{key:"fromArrayBuffer",value:function(t){var n=new Float64Array(t),a=n[1],i=n[2];return new e(P.fromArrayBuffer(n.slice(3,3+a).buffer),P.fromArrayBuffer(n.slice(3+a,3+a+i).buffer))}}]),e}(),P=function(){function e(t,n,a){Object(c.a)(this,e),this.buffer=void 0,this.inputSize=void 0,this.hiddenSize=void 0,this.outputSize=void 0,this.hiddenWeights=void 0,this.hiddenBiases=void 0,this.hiddenActivations=void 0,this.outputWeights=void 0,this.outputBiases=void 0,this.outputActivations=void 0,this.updatedHiddenWeights=void 0,this.updatedHiddenBiases=void 0,this.updatedOutputWeights=void 0,this.updatedOutputBiases=void 0;var i=n*t,r=n,o=n,l=a*n,s=a,u=a,h=new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT*(i+r+o+l+s+u+i+r+l+s));this.buffer=h,this.inputSize=t,this.hiddenSize=n,this.outputSize=a,this.hiddenWeights=new Float64Array(h,0,i),this.hiddenBiases=new Float64Array(h,Float64Array.BYTES_PER_ELEMENT*i,r),this.hiddenActivations=new Float64Array(h,Float64Array.BYTES_PER_ELEMENT*(i+r),o),this.outputWeights=new Float64Array(h,Float64Array.BYTES_PER_ELEMENT*(i+r+o),l),this.outputBiases=new Float64Array(h,Float64Array.BYTES_PER_ELEMENT*(i+r+o+l),s),this.outputActivations=new Float64Array(h,Float64Array.BYTES_PER_ELEMENT*(i+r+o+l+s),u),this.updatedHiddenWeights=new Float64Array(h,Float64Array.BYTES_PER_ELEMENT*(i+r+o+l+s+u),i),this.updatedHiddenBiases=new Float64Array(h,Float64Array.BYTES_PER_ELEMENT*(i+r+o+l+s+u+i),r),this.updatedOutputWeights=new Float64Array(h,Float64Array.BYTES_PER_ELEMENT*(i+r+o+l+s+u+i+r),l),this.updatedOutputBiases=new Float64Array(h,Float64Array.BYTES_PER_ELEMENT*(i+r+o+l+s+u+i+r+l),s),this.initializeWeights()}return Object(h.a)(e,null,[{key:"fromLayerSizes",value:function(t,n,a){return new e(t,n,a)}},{key:"fromArrayBuffer",value:function(t){var n=new Float64Array(t),a=n[0],i=n[1],r=n[2],o=i*a,l=i,s=n.subarray(3,3+o),u=n.subarray(3+o,3+o+l),c=r*i,h=r,p=n.subarray(3+o+l,3+o+l+c),d=n.subarray(3+o+l+c,3+o+l+c+h),g=new e(a,i,r);return g.hiddenWeights.set(s),g.hiddenBiases.set(u),g.outputWeights.set(p),g.outputBiases.set(d),g}}]),Object(h.a)(e,[{key:"initializeWeights",value:function(){_(this.hiddenWeights,this.inputSize),_(this.outputWeights,this.hiddenSize)}},{key:"evaluate",value:function(e){for(var t,n=this.inputSize,a=this.hiddenSize,i=this.outputSize,r=this.hiddenWeights,o=this.hiddenBiases,l=this.hiddenActivations,s=this.outputWeights,u=this.outputBiases,c=this.outputActivations,h=0;h<a;h++){for(var p=0,d=0;d<n;d++)p+=r[h*n+d]*e[d];l[h]=(t=p+o[h],Math.max(0,t))}for(var g=0;g<i;g++){for(var v=0,f=0;f<a;f++)v+=s[g*a+f]*l[f];c[g]=R(v+u[g])}return c}},{key:"trainWithoutUpdating",value:function(e,t,n){for(var a=n.evaluationOptions,i=v(e,t,a),r=this.hiddenWeights,o=this.updatedHiddenWeights,l=this.hiddenBiases,s=this.updatedHiddenBiases,u=this.outputWeights,c=this.updatedOutputWeights,h=this.outputBiases,p=this.updatedOutputBiases,d=n.derivativeStep,g=n.learningRate,f=r.length,m=0;m<f;m++){var y=r[m];r[m]+=d;var E=(v(e,t,a)-i)/d;o[m]=y+E*g,r[m]=y}for(var b=l.length,A=0;A<b;A++){var C=l[A];l[A]+=d;var k=(v(e,t,a)-i)/d;s[A]=C+k*g,l[A]=C}for(var O=u.length,w=0;w<O;w++){var S=u[w];u[w]+=d;var B=(v(e,t,a)-i)/d;c[w]=S+B*g,u[w]=S}for(var T=h.length,N=0;N<T;N++){var F=h[N];h[N]+=d;var j=(v(e,t,a)-i)/d;p[N]=F+j*g,h[N]=F}}},{key:"update",value:function(){var e=this.hiddenWeights,t=this.updatedHiddenWeights,n=this.hiddenBiases,a=this.updatedHiddenBiases,i=this.outputWeights,r=this.updatedOutputWeights,o=this.outputBiases,l=this.updatedOutputBiases;e.set(t),n.set(a),i.set(r),o.set(l)}},{key:"toArrayBuffer",value:function(){var e=this.inputSize,t=this.hiddenSize,n=this.outputSize,a=this.hiddenWeights,i=this.hiddenBiases,r=this.outputWeights,o=this.outputBiases,l=new Float64Array(3+a.length+i.length+r.length+o.length);return l[0]=e,l[1]=t,l[2]=n,l.set(a,3),l.set(i,3+a.length),l.set(r,3+a.length+i.length),l.set(o,3+a.length+i.length+r.length),l.buffer}}]),e}();function _(e,t){for(var n=0;n<e.length;n++)e[n]=b(0,1/Math.sqrt(t))}function R(e){return 1/(1+Math.exp(-e))}var D=function(){function e(t,n){Object(c.a)(this,e),this.leaderNetwork=t,this.followerNetwork=n,this.agentType=void 0,this.inputs=void 0,this.agentType=U.Habanero,this.inputs=new Float64Array(3)}return Object(h.a)(e,[{key:"lead",value:function(e,t){var n=this.inputs;return n[0]=2*e-1,n[1]=2*t-1,this.leaderNetwork.evaluate(n)}},{key:"follow",value:function(e,t,n){var a=this.inputs;return a[0]=2*e-1,a[1]=2*t-1,a[2]=2*n-1,this.followerNetwork.evaluate(a)[0]}},{key:"train",value:function(e,t){var n=this.leaderNetwork,a=this.followerNetwork;n.trainWithoutUpdating(this,e,t),a.trainWithoutUpdating(this,e,t),n.update(),a.update()}},{key:"toArrayBuffer",value:function(){var e=new Float64Array(this.leaderNetwork.toArrayBuffer()),t=new Float64Array(this.followerNetwork.toArrayBuffer()),n=new Float64Array(3+e.length+t.length);return n[0]=this.agentType,n[1]=e.length,n[2]=t.length,n.set(e,3),n.set(t,3+e.length),n.buffer}}],[{key:"fromCreationOptions",value:function(t){return e.fromHiddenLayerSize(t.hiddenLayerSize)}},{key:"fromHiddenLayerSize",value:function(t){return new e(H.fromLayerSizes(2,t,2),H.fromLayerSizes(3,t,1))}},{key:"fromArrayBuffer",value:function(t){var n=new Float64Array(t),a=n[1],i=n[2];return new e(H.fromArrayBuffer(n.slice(3,3+a).buffer),H.fromArrayBuffer(n.slice(3+a,3+a+i).buffer))}}]),e}(),H=function(){function e(t,n,a){Object(c.a)(this,e),this.buffer=void 0,this.inputSize=void 0,this.hiddenSize=void 0,this.outputSize=void 0,this.hiddenWeights=void 0,this.hiddenBiases=void 0,this.hiddenActivations=void 0,this.outputWeights=void 0,this.outputBiases=void 0,this.outputActivations=void 0,this.updatedHiddenWeights=void 0,this.updatedHiddenBiases=void 0,this.updatedOutputWeights=void 0,this.updatedOutputBiases=void 0;var i=n*t,r=n,o=n,l=a*n,s=a,u=a,h=new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT*(i+r+o+l+s+u+i+r+l+s));this.buffer=h,this.inputSize=t,this.hiddenSize=n,this.outputSize=a,this.hiddenWeights=new Float64Array(h,0,i),this.hiddenBiases=new Float64Array(h,Float64Array.BYTES_PER_ELEMENT*i,r),this.hiddenActivations=new Float64Array(h,Float64Array.BYTES_PER_ELEMENT*(i+r),o),this.outputWeights=new Float64Array(h,Float64Array.BYTES_PER_ELEMENT*(i+r+o),l),this.outputBiases=new Float64Array(h,Float64Array.BYTES_PER_ELEMENT*(i+r+o+l),s),this.outputActivations=new Float64Array(h,Float64Array.BYTES_PER_ELEMENT*(i+r+o+l+s),u),this.updatedHiddenWeights=new Float64Array(h,Float64Array.BYTES_PER_ELEMENT*(i+r+o+l+s+u),i),this.updatedHiddenBiases=new Float64Array(h,Float64Array.BYTES_PER_ELEMENT*(i+r+o+l+s+u+i),r),this.updatedOutputWeights=new Float64Array(h,Float64Array.BYTES_PER_ELEMENT*(i+r+o+l+s+u+i+r),l),this.updatedOutputBiases=new Float64Array(h,Float64Array.BYTES_PER_ELEMENT*(i+r+o+l+s+u+i+r+l),s),this.initializeWeights()}return Object(h.a)(e,null,[{key:"fromLayerSizes",value:function(t,n,a){return new e(t,n,a)}},{key:"fromArrayBuffer",value:function(t){var n=new Float64Array(t),a=n[0],i=n[1],r=n[2],o=i*a,l=i,s=n.subarray(3,3+o),u=n.subarray(3+o,3+o+l),c=r*i,h=r,p=n.subarray(3+o+l,3+o+l+c),d=n.subarray(3+o+l+c,3+o+l+c+h),g=new e(a,i,r);return g.hiddenWeights.set(s),g.hiddenBiases.set(u),g.outputWeights.set(p),g.outputBiases.set(d),g}}]),Object(h.a)(e,[{key:"initializeWeights",value:function(){Y(this.hiddenWeights,this.inputSize),Y(this.outputWeights,this.hiddenSize)}},{key:"evaluate",value:function(e){for(var t=this.inputSize,n=this.hiddenSize,a=this.outputSize,i=this.hiddenWeights,r=this.hiddenBiases,o=this.hiddenActivations,l=this.outputWeights,s=this.outputBiases,u=this.outputActivations,c=0;c<n;c++){for(var h=0,p=0;p<t;p++)h+=i[c*t+p]*e[p];o[c]=G(h+r[c])}for(var d=0;d<a;d++){for(var g=0,v=0;v<n;v++)g+=l[d*n+v]*o[v];u[d]=G(g+s[d])}return u}},{key:"trainWithoutUpdating",value:function(e,t,n){for(var a=n.evaluationOptions,i=v(e,t,a),r=this.hiddenWeights,o=this.updatedHiddenWeights,l=this.hiddenBiases,s=this.updatedHiddenBiases,u=this.outputWeights,c=this.updatedOutputWeights,h=this.outputBiases,p=this.updatedOutputBiases,d=n.derivativeStep,g=n.learningRate,f=r.length,m=0;m<f;m++){var y=r[m];r[m]+=d;var E=(v(e,t,a)-i)/d;o[m]=y+E*g,r[m]=y}for(var b=l.length,A=0;A<b;A++){var C=l[A];l[A]+=d;var k=(v(e,t,a)-i)/d;s[A]=C+k*g,l[A]=C}for(var O=u.length,w=0;w<O;w++){var S=u[w];u[w]+=d;var B=(v(e,t,a)-i)/d;c[w]=S+B*g,u[w]=S}for(var T=h.length,N=0;N<T;N++){var F=h[N];h[N]+=d;var j=(v(e,t,a)-i)/d;p[N]=F+j*g,h[N]=F}}},{key:"update",value:function(){var e=this.hiddenWeights,t=this.updatedHiddenWeights,n=this.hiddenBiases,a=this.updatedHiddenBiases,i=this.outputWeights,r=this.updatedOutputWeights,o=this.outputBiases,l=this.updatedOutputBiases;e.set(t),n.set(a),i.set(r),o.set(l)}},{key:"toArrayBuffer",value:function(){var e=this.inputSize,t=this.hiddenSize,n=this.outputSize,a=this.hiddenWeights,i=this.hiddenBiases,r=this.outputWeights,o=this.outputBiases,l=new Float64Array(3+a.length+i.length+r.length+o.length);return l[0]=e,l[1]=t,l[2]=n,l.set(a,3),l.set(i,3+a.length),l.set(r,3+a.length+i.length),l.set(o,3+a.length+i.length+r.length),l.buffer}}]),e}();function Y(e,t){for(var n=0;n<e.length;n++)e[n]=b(0,1/Math.sqrt(t))}function G(e){return 1/(1+Math.exp(-e))}var U,J=function(){function e(t){Object(c.a)(this,e),this.minStrength=t,this.agentType=void 0,this.leadOutput=void 0,this.agentType=U.Ilama,this.leadOutput=new Float64Array(2)}return Object(h.a)(e,null,[{key:"fromCreationOptions",value:function(t){return new e(t.minStrength)}},{key:"fromArrayBuffer",value:function(t){return new e(new Float64Array(t)[1])}}]),Object(h.a)(e,[{key:"lead",value:function(e,t){var n=this.leadOutput;w(t,n);var a=e>=this.minStrength;return n[0]*=a,n[1]*=a,n}},{key:"follow",value:function(e,t,n){return n*(e>this.minStrength)}},{key:"train",value:function(){}},{key:"toArrayBuffer",value:function(){return new Float64Array([U.Ilama,this.minStrength]).buffer}}]),e}();!function(e){e[e.Artichoke=1]="Artichoke",e[e.Broccoli=2]="Broccoli",e[e.Carrot=3]="Carrot",e[e.Daikon=4]="Daikon",e[e.Eggplant=5]="Eggplant",e[e.Fig=6]="Fig",e[e.Grape=7]="Grape",e[e.Habanero=8]="Habanero",e[e.Ilama=9]="Ilama"}(U||(U={}));var q=[U.Artichoke,U.Broccoli,U.Carrot,U.Daikon,U.Eggplant,U.Fig,U.Grape,U.Habanero,U.Ilama];function K(e){var t,n=new Float64Array(e)[0];if(t=n,q.includes(t))return function(e,t){switch(t){case U.Artichoke:return A.fromArrayBuffer(e);case U.Broccoli:return F.fromArrayBuffer(e);case U.Carrot:return j.fromArrayBuffer(e);case U.Daikon:return M.fromArrayBuffer(e);case U.Eggplant:return I.fromArrayBuffer(e);case U.Fig:return L.fromArrayBuffer(e);case U.Grape:return V.fromArrayBuffer(e);case U.Habanero:return D.fromArrayBuffer(e);case U.Ilama:return J.fromArrayBuffer(e)}}(e,n);throw new TypeError("Cannot recognize AgentType: "+n)}function $(e,t){switch(e){case U.Artichoke:return A.fromCreationOptions(t);case U.Broccoli:return F.fromCreationOptions(t);case U.Carrot:return j.fromCreationOptions(t);case U.Daikon:return M.fromCreationOptions(t);case U.Eggplant:return I.fromCreationOptions(t);case U.Fig:return L.fromCreationOptions(t);case U.Grape:return V.fromCreationOptions(t);case U.Habanero:return D.fromCreationOptions(t);case U.Ilama:return J.fromCreationOptions(t)}}function Q(e){switch(e){case U.Artichoke:return"Artichoke [Neural Network]";case U.Broccoli:return"Broccoli [Random]";case U.Carrot:return"Carrot [Value]";case U.Daikon:return"Daikon [Constant]";case U.Eggplant:return"Eggplant [Value]";case U.Fig:return"Fig [Neural Network]";case U.Grape:return"Grape [Neural Network]";case U.Habanero:return"Habanero [Neural Network]";case U.Ilama:return"Ilama [Tighter Random]"}}function X(e){switch(e){case U.Artichoke:return{hiddenLayerSize:16};case U.Broccoli:case U.Carrot:return{};case U.Daikon:return{bet:.5};case U.Eggplant:return{};case U.Fig:case U.Grape:case U.Habanero:return{hiddenLayerSize:16};case U.Ilama:return{minStrength:.4}}}function Z(e,t){switch(e){case U.Artichoke:return function(e){return m(e.hiddenLayerSize)}(t);case U.Broccoli:case U.Carrot:return!0;case U.Daikon:return function(e){var t=e.bet;return 0<=t&&t<=1}(t);case U.Eggplant:return!0;case U.Fig:case U.Grape:case U.Habanero:return function(e){return m(e.hiddenLayerSize)}(t);case U.Ilama:return function(e){return E(e.minStrength)}(t)}}n(21);function ee(e,t){return e.includes(t)?e:e.concat([t])}function te(e,t){return e.filter((function(e){return e!==t}))}function ne(e,t){return e.every((function(e){return t.includes(e)}))&&t.every((function(t){return e.includes(t)}))}function ae(e,t){var n,a=Object(l.a)(e);try{for(a.s();!(n=a.n()).done;){var i=n.value,r=i.name,o=i.agent;if(t===r)return o}}catch(s){a.e(s)}finally{a.f()}throw new Error("Cannot find agent named "+JSON.stringify(t)+". The only agents provided were: "+JSON.stringify(e))}var ie,re=n(11),oe=n.n(re).a;function le(e,t,n,a){return a?function(e,t,n){return new Promise((function(a){a(v(e,t,n))}))}(e,t,n):function(e,t,n){return new Promise((function(a){var i=e.toArrayBuffer(),r=t.toArrayBuffer(),o=new oe;o.addEventListener("message",(function(e){var t=e.data;a(t.evaluation)})),o.postMessage({messageType:ie.Start,agentABuffer:i,agentBBuffer:r,evaluationOptions:n},[i,r])}))}(e,t,n)}!function(e){e[e.Start=0]="Start",e[e.Done=1]="Done"}(ie||(ie={}));var se,ue,ce=n(12),he=n.n(ce).a;function pe(e,t,n,a,i,r){var o,l={name:e.name,agent:(o=e.agent,K(o.toArrayBuffer()))};i?function(e,t,n,a,i){for(var r=e.agent,o=t.map((function(e){return e.agent})),l=t.map((function(e){return e.name})),s=t.length,u=a.evaluationOptions,c=0;c<n;c++){for(var h=new Float64Array(s),p=0;p<s;p++){var d=o[p];h[p]=v(r,d,u)}for(var g=0,f=h[0],m=1;m<s;m++){var y=h[m];y<f&&(f=y,g=m)}var E=o[g];r.train(E,a);for(var b=new Array(s),A=0;A<s;A++){var C=o[A];b[A]={opponentName:l[A],reward:v(r,C,u)}}i(c,e,b,de)}}(l,t,n,a,r):function(e,t,n,a,i){var r=new he,o=r.terminate.bind(r);r.addEventListener("message",(function(e){var t=e.data;switch(t.messageType){case se.CycleComplete:var n=t.namedTraineeBuffer,a={name:n.agentName,agent:K(n.buffer)},r=t.relativeRewards;i(t.cycleNumber,a,r,o);break;case se.Done:o()}})),r.postMessage({messageType:se.Start,namedTraineeBuffer:{agentName:e.name,buffer:e.agent.toArrayBuffer()},namedOpponentBuffers:t.map((function(e){return{agentName:e.name,buffer:e.agent.toArrayBuffer()}})),trainingCycles:n,trainingCycleOptions:a})}(l,t,n,a,r)}function de(){}!function(e){e[e.Start=0]="Start",e[e.CycleComplete=1]="CycleComplete",e[e.Done=2]="Done"}(se||(se={})),function(e){e[e.AgentList=0]="AgentList",e[e.Options=1]="Options",e[e.AgentCreation=2]="AgentCreation",e[e.AgentDeletion=3]="AgentDeletion",e[e.Evaluation=4]="Evaluation",e[e.TrainingAgentSelection=5]="TrainingAgentSelection",e[e.Training=6]="Training",e[e.Play=7]="Play",e[e.Graph=8]="Graph"}(ue||(ue={}));var ge,ve,fe;!function(e){e[e.Initial=0]="Initial",e[e.Following=1]="Following",e[e.Max=2]="Max"}(ge||(ge={})),function(e){e[e.Showdown=0]="Showdown",e[e.Fold=1]="Fold"}(ve||(ve={})),function(e){e[e.Leader=0]="Leader",e[e.Follower=1]="Follower"}(fe||(fe={}));function me(e,t){e.width=800,e.height=800;var n=e.getContext("2d"),a=ae(t.agents,t.graphedAgentName),i=t.graph;switch(i.policyGraphType){case fe.Leader:!function(e,t,n){e.clearRect(0,0,800,800);var a=function(e,t){for(var n=e.lead(0,t),a=n[0],i=n[1],r=Math.max(a,i),o=[{strength:0,initialBet:a,maxBet:r,unadjustedMaxBet:i}],l=.05;l<1;l+=.05){var s=e.lead(l,t),u=s[0],c=s[1],h=Math.max(u,c);o.push({strength:l,initialBet:u,maxBet:h,unadjustedMaxBet:c})}var p=e.lead(1,t),d=p[0],g=p[1],v=Math.max(d,g);return o.push({strength:1,initialBet:d,maxBet:v,unadjustedMaxBet:g}),o}(n,t.noise);e.lineWidth=3;var i=800-800*a[0].unadjustedMaxBet;e.beginPath(),e.moveTo(0,i);for(var r=1;r<a.length;r++){var o=a[r],l=800*o.strength,s=800-800*o.unadjustedMaxBet;e.lineTo(l,s)}e.strokeStyle="#00880088",e.stroke();var u=800-800*a[0].initialBet;e.beginPath(),e.moveTo(0,u);for(var c=1;c<a.length;c++){var h=a[c],p=800*h.strength,d=800-800*h.initialBet;e.lineTo(p,d)}e.strokeStyle="#ff000088",e.stroke();var g=800-800*a[0].maxBet;e.beginPath(),e.moveTo(0,g);for(var v=1;v<a.length;v++){var f=a[v],m=800*f.strength,y=800-800*f.maxBet;e.lineTo(m,y)}e.strokeStyle="#0000ff88",e.stroke()}(n,i,a);break;case fe.Follower:!function(e,t,n){e.clearRect(0,0,800,800);var a,i=function(e,t){for(var n=[],a=0;a<1;a+=.05)for(var i=0;i<1;i+=.05)n.push({strength:a,initialBet:i,followingBet:e.follow(a,i,t)});return n}(n,t.noise),r=Object(l.a)(i);try{for(r.s();!(a=r.n()).done;){var o=a.value,s=800*o.strength,u=800-800*o.initialBet-40;e.fillStyle=ye(o.followingBet),e.fillRect(s,u,s+40,u+40)}}catch(c){r.e(c)}finally{r.f()}}(n,i,a)}}function ye(e){var t=255*(1-e)|0;return"rgb("+t+","+t+","+t+")"}var Ee,be=n(14);function Ae(e){for(var t=function(e){var t=new Uint32Array(1);return t[0]=e,t[0]}(e.charCodeAt(0)<<16|e.charCodeAt(1)),n=new Uint8Array(t),a=0;a<t;a++){var i=e.charCodeAt(2+Math.floor(a/2)),r=a%2===0?i>>>8:i;n[a]=r}return n.buffer}function Ce(e){for(var t=e.length,n=new Array(Math.ceil(t/2)),a=0;a<e.length;a++){var i=e[a];a%2===0?n[a/2]=i<<8:n[(a-1)/2]|=i}return String.fromCharCode(t>>>16,65535&t)+function(e){try{return String.fromCharCode.apply(String,Object(be.a)(e))}catch(a){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t}}(n)}function ke(e){var t=JSON.stringify(e);localStorage.setItem(Ee.AppOptions,t)}!function(e){e.AgentNames="UnitWar.AgentNames",e.AgentPrefix="UnitWar.Agent::",e.AppOptions="UnitWar.AppOptions"}(Ee||(Ee={}));var Oe=function(e){Object(d.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).graphCanvasRef=void 0,window.app=Object(p.a)(a),a.graphCanvasRef=i.a.createRef(),a.state=function(){var e,t,n=null!==(e=function(){var e=localStorage.getItem(Ee.AgentNames);if(null!==e)return JSON.parse(e).map((function(e){var t=localStorage.getItem(Ee.AgentPrefix+e);if(null===t)throw new Error;return{name:e,agent:K(Ae(t))}}))}())&&void 0!==e?e:[],a=null!==(t=function(){var e=localStorage.getItem(Ee.AppOptions);if(null!==e){var t=JSON.parse(e);if(1===t.version)return t}}())&&void 0!==t?t:{version:1,trainingCycles:30,trainingCycleOptions:{derivativeStep:.001,learningRate:.1,evaluationOptions:{hands:1e3,ante:.001}},useMainThreadForExpensiveComputation:!1};return{stateType:ue.AgentList,agents:n,options:a}}(),a.bindMethods(),a}return Object(h.a)(n,[{key:"bindMethods",value:function(){this.onOptionsClick=this.onOptionsClick.bind(this),this.onCreateAgentClick=this.onCreateAgentClick.bind(this),this.onDeleteAgentClick=this.onDeleteAgentClick.bind(this),this.onEvaluateClick=this.onEvaluateClick.bind(this),this.onTrainClick=this.onTrainClick.bind(this),this.onPlayClick=this.onPlayClick.bind(this),this.onGraphClick=this.onGraphClick.bind(this),this.onAgentListClick=this.onAgentListClick.bind(this),this.onTrainingCyclesInputValueChange=this.onTrainingCyclesInputValueChange.bind(this),this.onTrainingCycleDerivativeStepInputValueChange=this.onTrainingCycleDerivativeStepInputValueChange.bind(this),this.onTrainingCycleLearningRateInputValueChange=this.onTrainingCycleLearningRateInputValueChange.bind(this),this.onTrainingCycleEvaluationHandsInputValueChange=this.onTrainingCycleEvaluationHandsInputValueChange.bind(this),this.onTrainingCycleEvaluationAnteInputValueChange=this.onTrainingCycleEvaluationAnteInputValueChange.bind(this),this.onUseMainThreadChange=this.onUseMainThreadChange.bind(this),this.onAgentNameChange=this.onAgentNameChange.bind(this),this.onAgentTypeChange=this.onAgentTypeChange.bind(this),this.onConfirmCreationClick=this.onConfirmCreationClick.bind(this),this.onFirstEvaluatedAgentNameChange=this.onFirstEvaluatedAgentNameChange.bind(this),this.onSecondEvaluatedAgentNameChange=this.onSecondEvaluatedAgentNameChange.bind(this),this.onStartEvaluationClick=this.onStartEvaluationClick.bind(this),this.onTraineeChange=this.onTraineeChange.bind(this),this.onStartTrainingClick=this.onStartTrainingClick.bind(this),this.onTerminateTrainingClick=this.onTerminateTrainingClick.bind(this),this.onCancelAgentDeletionClick=this.onCancelAgentDeletionClick.bind(this),this.onConfirmAgentDeletionClick=this.onConfirmAgentDeletionClick.bind(this),this.onNameOfAgentToBeDeletedChange=this.onNameOfAgentToBeDeletedChange.bind(this),this.onSelectAgentForDeletionClick=this.onSelectAgentForDeletionClick.bind(this),this.onOpponentNameChange=this.onOpponentNameChange.bind(this),this.onBetInputValueChange=this.onBetInputValueChange.bind(this),this.onPlaceBetClick=this.onPlaceBetClick.bind(this),this.onFoldClick=this.onFoldClick.bind(this),this.onAcknowledgeClick=this.onAcknowledgeClick.bind(this),this.onGraphedAgentNameChange=this.onGraphedAgentNameChange.bind(this),this.onGraphTypeChange=this.onGraphTypeChange.bind(this),this.onGraphNoiseChange=this.onGraphNoiseChange.bind(this)}},{key:"componentDidUpdate",value:function(){var e=this.state,t=this.graphCanvasRef.current;e.stateType===ue.Graph&&null!==t&&me(t,e)}},{key:"expectState",value:function(e){var t=this.state;if(t.stateType===e)return t;throw new Error("Expected StateType."+ue[e]+" but got StateType."+ue[t.stateType]+".")}},{key:"render",value:function(){var e=this.state;switch(e.stateType){case ue.AgentList:return this.renderAgentList(e);case ue.Options:return this.renderOptionsMenu(e);case ue.AgentCreation:return this.renderAgentCreationMenu(e);case ue.AgentDeletion:return this.renderAgentDeletionMenu(e);case ue.Evaluation:return this.renderEvaluationMenu(e);case ue.TrainingAgentSelection:return this.renderTrainingAgentSelectionMenu(e);case ue.Training:return this.renderTrainingMenu(e);case ue.Play:return this.renderPlayMenu(e);case ue.Graph:return this.renderGraphMenu(e)}}},{key:"renderAgentList",value:function(e){var t=we(e);return i.a.createElement("div",{className:"App"},i.a.createElement("section",null,i.a.createElement("h2",null,"Agents:"),i.a.createElement("ul",null,t.map((function(e){var t=e.name,n=e.agent;return i.a.createElement("li",{key:t},t," (",Q(n.agentType),")")})))),i.a.createElement("section",null,i.a.createElement("button",{onClick:this.onOptionsClick},"Options"),i.a.createElement("button",{onClick:this.onCreateAgentClick},"Create agent"),i.a.createElement("button",{disabled:0===t.length,onClick:this.onDeleteAgentClick},"Delete agent"),i.a.createElement("button",{disabled:0===t.length,onClick:this.onEvaluateClick},"Evaluate"),i.a.createElement("button",{disabled:0===t.length,onClick:this.onTrainClick},"Train"),i.a.createElement("button",{disabled:0===t.length,onClick:this.onPlayClick},"Play"),i.a.createElement("button",{disabled:0===t.length,onClick:this.onGraphClick},"Graph")))}},{key:"renderOptionsMenu",value:function(e){var t=e.inputValues;return i.a.createElement("div",{className:"App"},i.a.createElement("section",null," ",i.a.createElement("button",{onClick:this.onAgentListClick},"Back")," ",i.a.createElement("h2",null,"Options")),i.a.createElement("section",null,i.a.createElement("h3",null,"Training"),i.a.createElement("label",null,"Training cycles:"," ",i.a.createElement("input",{className:m(+t.trainingCycles)?"":"InvalidInput",type:"text",value:t.trainingCycles,onChange:this.onTrainingCyclesInputValueChange})),i.a.createElement("label",null,"Derivative step:"," ",i.a.createElement("input",{className:y(+t.trainingCycleOptions.derivativeStep)?"":"InvalidInput",type:"text",value:t.trainingCycleOptions.derivativeStep,onChange:this.onTrainingCycleDerivativeStepInputValueChange})),i.a.createElement("label",null,"Learning rate:"," ",i.a.createElement("input",{className:y(+t.trainingCycleOptions.learningRate)?"":"InvalidInput",type:"text",value:t.trainingCycleOptions.learningRate,onChange:this.onTrainingCycleLearningRateInputValueChange}))),i.a.createElement("section",null,i.a.createElement("h3",null,"Game"),i.a.createElement("label",null,"Hands:"," ",i.a.createElement("input",{className:m(+t.trainingCycleOptions.evaluationOptions.hands)?"":"InvalidInput",type:"text",value:t.trainingCycleOptions.evaluationOptions.hands,onChange:this.onTrainingCycleEvaluationHandsInputValueChange})),i.a.createElement("label",null,"Ante:"," ",i.a.createElement("input",{className:E(+t.trainingCycleOptions.evaluationOptions.ante)?"":"InvalidInput",type:"text",value:t.trainingCycleOptions.evaluationOptions.ante,onChange:this.onTrainingCycleEvaluationAnteInputValueChange}))),i.a.createElement("section",null,i.a.createElement("h3",null,"Performance"),i.a.createElement("label",null,"Use main thread for expensive computations:"," ",i.a.createElement("input",{type:"checkbox",checked:e.options.useMainThreadForExpensiveComputation,onChange:this.onUseMainThreadChange}))))}},{key:"renderAgentCreationMenu",value:function(e){var t=e.agents.every((function(t){return t.name!==e.agentName}))&&/^[\w.\-,/()=]+(?:\s*[\w.\-,/()=]+)*$/.test(e.agentName);return i.a.createElement("div",{className:"App"},i.a.createElement("section",null,i.a.createElement("button",{onClick:this.onAgentListClick},"Back"),i.a.createElement("h2",null,"Create agent")),i.a.createElement("section",null,i.a.createElement("label",null,"Agent name:"," ",i.a.createElement("input",{className:t?"":"InvalidInput",type:"text",value:e.agentName,onChange:this.onAgentNameChange})),i.a.createElement("label",null,"Agent type:"," ",i.a.createElement("select",{value:e.agentType,onChange:this.onAgentTypeChange},q.map((function(e){return i.a.createElement("option",{key:e,value:e},Q(e))})))),this.renderAgentParams(e),i.a.createElement("button",{disabled:!(t&&Z(e.agentType,Te(e.agentCreationOptionInputValues))),onClick:this.onConfirmCreationClick},"Create")))}},{key:"renderAgentParams",value:function(e){var t=this;switch(e.agentType){case U.Artichoke:var n=e.agentCreationOptionInputValues;return i.a.createElement("section",null,i.a.createElement("h3",null,"Agent options"),i.a.createElement("label",null,"Hidden neurons:"," ",i.a.createElement("input",{className:m(+n.hiddenLayerSize)?"":"InvalidInput",type:"text",value:n.hiddenLayerSize,onChange:function(e){return t.changeAgentCreationOptionInputValue("hiddenLayerSize",e.target.value)}})));case U.Broccoli:case U.Carrot:return null;case U.Daikon:var a=e.agentCreationOptionInputValues;return i.a.createElement("section",null,i.a.createElement("h3",null,"Agent options"),i.a.createElement("label",null,"Bet:"," ",i.a.createElement("input",{className:E(+a.bet)?"":"InvalidInput",type:"text",value:a.bet,onChange:function(e){return t.changeAgentCreationOptionInputValue("bet",e.target.value)}})));case U.Eggplant:return null;case U.Fig:var r=e.agentCreationOptionInputValues;return i.a.createElement("section",null,i.a.createElement("h3",null,"Agent options"),i.a.createElement("label",null,"Hidden neurons:"," ",i.a.createElement("input",{className:m(+r.hiddenLayerSize)?"":"InvalidInput",type:"text",value:r.hiddenLayerSize,onChange:function(e){return t.changeAgentCreationOptionInputValue("hiddenLayerSize",e.target.value)}})));case U.Grape:var o=e.agentCreationOptionInputValues;return i.a.createElement("section",null,i.a.createElement("h3",null,"Agent options"),i.a.createElement("label",null,"Hidden neurons:"," ",i.a.createElement("input",{className:m(+o.hiddenLayerSize)?"":"InvalidInput",type:"text",value:o.hiddenLayerSize,onChange:function(e){return t.changeAgentCreationOptionInputValue("hiddenLayerSize",e.target.value)}})));case U.Habanero:var l=e.agentCreationOptionInputValues;return i.a.createElement("section",null,i.a.createElement("h3",null,"Agent options"),i.a.createElement("label",null,"Hidden neurons:"," ",i.a.createElement("input",{className:m(+l.hiddenLayerSize)?"":"InvalidInput",type:"text",value:l.hiddenLayerSize,onChange:function(e){return t.changeAgentCreationOptionInputValue("hiddenLayerSize",e.target.value)}})));case U.Ilama:var s=e.agentCreationOptionInputValues;return i.a.createElement("section",null,i.a.createElement("h3",null,"Agent options"),i.a.createElement("label",null,"Minimum playable strength:"," ",i.a.createElement("input",{className:E(+s.minStrength)?"":"InvalidInput",type:"text",value:s.minStrength,onChange:function(e){return t.changeAgentCreationOptionInputValue("minStrength",e.target.value)}})))}}},{key:"renderAgentDeletionMenu",value:function(e){var t=we(e);return i.a.createElement("div",{className:"App"},i.a.createElement("section",null,i.a.createElement("button",{onClick:this.onAgentListClick},"Back"),i.a.createElement("h2",null,"Delete agent")),e.isConfirmingDeletion?i.a.createElement("section",null,i.a.createElement("p",null,"Are you sure you want to delete ",e.selectedAgentName," (",Q(ae(e.agents,e.selectedAgentName).agentType),")?"),i.a.createElement("p",null,"The deletion will be permanent, and it will be impossible to restore this agent."),i.a.createElement("section",null,i.a.createElement("button",{onClick:this.onCancelAgentDeletionClick},"Cancel"),i.a.createElement("button",{className:"DangerButton",onClick:this.onConfirmAgentDeletionClick},"Confirm"))):i.a.createElement("section",null,i.a.createElement("label",null,"Choose an agent to delete:"," ",i.a.createElement("select",{value:e.selectedAgentName,onChange:this.onNameOfAgentToBeDeletedChange},t.map((function(e){var t=e.name,n=e.agent;return i.a.createElement("option",{key:t,value:t},t," (",Q(n.agentType),")")}))),i.a.createElement("button",{onClick:this.onSelectAgentForDeletionClick},"Select"))))}},{key:"renderEvaluationMenu",value:function(e){if(e.hasStartedEvaluation){var t=e.firstAgentReward;return void 0===t?this.renderEvaluationInProgressMenu(e):this.renderEvaluationCompleteMenu(e,t)}return this.renderEvaluationAgentSelectionMenu(e)}},{key:"renderEvaluationAgentSelectionMenu",value:function(e){var t=e.selectedAgentNames,n=we(e);return i.a.createElement("div",{className:"App"},i.a.createElement("section",null,i.a.createElement("button",{onClick:this.onAgentListClick},"Back"),i.a.createElement("h2",null,"Evaluate")),i.a.createElement("section",null,"Evaluate"," ",i.a.createElement("select",{value:t[0],onChange:this.onFirstEvaluatedAgentNameChange},n.map((function(e){var t=e.name,n=e.agent;return i.a.createElement("option",{value:t,key:t},t," (",Q(n.agentType),")")})))," ","against"," ",i.a.createElement("select",{value:t[1],onChange:this.onSecondEvaluatedAgentNameChange},n.map((function(e){var t=e.name,n=e.agent;return i.a.createElement("option",{value:t,key:t},t," (",Q(n.agentType),")")}))),i.a.createElement("button",{onClick:this.onStartEvaluationClick},"Start")))}},{key:"renderEvaluationInProgressMenu",value:function(e){var t=e.selectedAgentNames;return i.a.createElement("div",{className:"App"},i.a.createElement("section",null,i.a.createElement("button",{onClick:this.onAgentListClick},"Cancel"),i.a.createElement("h2",null,"Evaluate")),i.a.createElement("section",null,"Evaluating ",t[0]," (",Q(ae(e.agents,t[0]).agentType),") against ",t[1]," (",Q(ae(e.agents,t[1]).agentType),"..."))}},{key:"renderEvaluationCompleteMenu",value:function(e,t){var n=e.selectedAgentNames,a=e.options.trainingCycleOptions.evaluationOptions.hands;return i.a.createElement("div",{className:"App"},i.a.createElement("section",null,i.a.createElement("button",{onClick:this.onAgentListClick},"Done"),i.a.createElement("h2",null,"Evaluate")),i.a.createElement("section",null,"Evaluated ",n[0]," (",Q(ae(e.agents,n[0]).agentType),") against ",n[1]," (",Q(ae(e.agents,n[1]).agentType),"): ",t>0?"+":"",t.toFixed(3)," (",(100*(t+a)/(2*a)).toFixed(2),"%)"))}},{key:"renderTrainingAgentSelectionMenu",value:function(e){var t=this,n=we(e);return i.a.createElement("div",{className:"App"},i.a.createElement("section",null,i.a.createElement("button",{onClick:this.onAgentListClick},"Back"),i.a.createElement("h2",null,"Train")),i.a.createElement("section",null,"Train"," ",i.a.createElement("select",{value:e.selectedAgentName,onChange:this.onTraineeChange},n.map((function(e){var t=e.name,n=e.agent;return i.a.createElement("option",{value:t,key:t},t," (",Q(n.agentType),")")})))," ","against:"," ",i.a.createElement("section",null,n.map((function(n){var a=n.name,r=n.agent;return i.a.createElement("label",{key:a},i.a.createElement("input",{type:"checkbox",checked:e.opponentNames.includes(a),onChange:function(e){return t.setIsAgentUsedAsOpponent(a,e.target.checked)}})," ",a," (",Q(r.agentType),")")}))),i.a.createElement("button",{disabled:e.opponentNames.length<1,onClick:this.onStartTrainingClick},"Start")))}},{key:"renderTrainingMenu",value:function(e){return e.cyclesCompleted===e.options.trainingCycles?this.renderTrainingCompleteMenu(e):e.hasTrainingBeenTerminated?this.renderTrainingTerminatedMenu(e):this.renderTrainingInProgressMenu(e)}},{key:"renderTrainingCompleteMenu",value:function(e){var t=we(e),n=e.options.trainingCycleOptions.evaluationOptions.hands,a=e.opponentNames.map((function(e){return{name:e,agent:ae(t,e)}}));return i.a.createElement("div",{className:"App"},i.a.createElement("section",null,i.a.createElement("button",{onClick:this.onAgentListClick},"Done")," ",i.a.createElement("h2",null,"Training")),i.a.createElement("section",null,"Finished training ",e.traineeName," (",Q(ae(t,e.traineeName).agentType),") against:"," ",i.a.createElement("section",null,i.a.createElement("ol",{className:"Unnumbered"},e.relativeRewardLists.map((function(e,t){return i.a.createElement("li",{key:t},"Cycle ",t,":",i.a.createElement("ul",null,a.map((function(t){var a=t.name,r=t.agent,o=Fe(e,a),l=(o+n)/(2*n);return i.a.createElement("li",{key:a},i.a.createElement("label",null,a," (",Q(r.agentType),"): ",o.toFixed(3)," (",(100*l).toFixed(2),"%)"))}))))}))))))}},{key:"renderTrainingTerminatedMenu",value:function(e){var t=we(e),n=e.options.trainingCycleOptions.evaluationOptions.hands,a=e.opponentNames.map((function(e){return{name:e,agent:ae(t,e)}}));return i.a.createElement("div",{className:"App"},i.a.createElement("section",null,i.a.createElement("button",{onClick:this.onAgentListClick},"Done")," ",i.a.createElement("h2",null,"Training")),i.a.createElement("section",null,"Terminated training ",e.traineeName," (",Q(ae(t,e.traineeName).agentType),") against:"," ",i.a.createElement("section",null,i.a.createElement("ol",{className:"Unnumbered"},e.relativeRewardLists.map((function(e,t){return i.a.createElement("li",{key:t},"Cycle ",t,":",i.a.createElement("ul",null,a.map((function(t){var a=t.name,r=t.agent,o=Fe(e,a),l=(o+n)/(2*n);return i.a.createElement("li",{key:a},i.a.createElement("label",null,a," (",Q(r.agentType),"): ",o.toFixed(3)," (",(100*l).toFixed(2),"%)"))}))))}))))))}},{key:"renderTrainingInProgressMenu",value:function(e){var t=we(e),n=e.options.trainingCycleOptions.evaluationOptions.hands,a=e.opponentNames.map((function(e){return{name:e,agent:ae(t,e)}}));return i.a.createElement("div",{className:"App"},i.a.createElement("section",null,i.a.createElement("button",{onClick:this.onTerminateTrainingClick},"Terminate")," ",i.a.createElement("h2",null,"Training")),i.a.createElement("section",null,"Training ",e.traineeName," (",Q(ae(t,e.traineeName).agentType),") against:"," ",i.a.createElement("section",null,i.a.createElement("ol",{className:"Unnumbered"},e.relativeRewardLists.map((function(e,t){return i.a.createElement("li",{key:t},"Cycle ",t,":",i.a.createElement("ul",null,a.map((function(t){var a=t.name,r=t.agent,o=Fe(e,a),l=(o+n)/(2*n);return i.a.createElement("li",{key:a},i.a.createElement("label",null,a," (",Q(r.agentType),"): ",o.toFixed(3)," (",(100*l).toFixed(2),"%)"))}))))}))))))}},{key:"renderPlayMenu",value:function(e){var t,n=e.betState,a=e.acknowledgeable,r=e.options.trainingCycleOptions.evaluationOptions.ante;if(void 0!==a)t=this.renderAcknowledgementMenu(a);else switch(n.betStateType){case ge.Initial:t=this.renderInitialBetMenu(n,r);break;case ge.Following:t=this.renderFollowingBetMenu(n);break;case ge.Max:t=this.renderMaxBetMenu(n)}var o=we(e);return i.a.createElement("div",{className:"App"},i.a.createElement("section",null,i.a.createElement("button",{onClick:this.onAgentListClick},"Quit"),i.a.createElement("h2",null,"Play")),i.a.createElement("section",null,i.a.createElement("label",{className:"PlayMenuLabel"},"Playing"," ",i.a.createElement("select",{value:e.opponentName,onChange:this.onOpponentNameChange},o.map((function(e){var t=e.name,n=e.agent;return i.a.createElement("option",{key:t,value:t},t," (",Q(n.agentType),")")})))),i.a.createElement("label",{className:"PlayMenuLabel"},"Hands played: ",e.hands),i.a.createElement("label",{className:"PlayMenuLabel"},"Reward: ",e.reward.toFixed(3)),0===e.hands?i.a.createElement("label",{className:"PlayMenuLabel"},"Performance: 50.00%"):i.a.createElement("label",{className:"PlayMenuLabel"},"Performance:"," ",(100*(e.reward+e.hands)/(2*e.hands)).toFixed(2),"%")),t)}},{key:"renderAcknowledgementMenu",value:function(e){switch(e.acknowledgeableType){case ve.Showdown:return this.renderShowdownAcknowledgementMenu(e);case ve.Fold:return this.renderFoldAcknowledgementMenu(e)}}},{key:"renderShowdownAcknowledgementMenu",value:function(e){var t=e.strength,n=e.opponentStrength,a=e.reward;return a>0?i.a.createElement("section",null,i.a.createElement("p",null,"You won ",a,"."),i.a.createElement("p",null,"Your strength: ",t),i.a.createElement("p",null,"Opponent strength: ",n),i.a.createElement("button",{onClick:this.onAcknowledgeClick},"Continue")):a<0?i.a.createElement("section",null,i.a.createElement("p",null,"You lost ",-a,"."),i.a.createElement("p",null,"Your strength: ",t),i.a.createElement("p",null,"Opponent strength: ",n),i.a.createElement("button",{onClick:this.onAcknowledgeClick},"Continue")):i.a.createElement("section",null,"You and your opponent both had a strength of ",t,", so nothing was won or lost.",i.a.createElement("button",{onClick:this.onAcknowledgeClick},"Continue"))}},{key:"renderFoldAcknowledgementMenu",value:function(e){var t=e.reward;return t>0?i.a.createElement("section",null,i.a.createElement("p",null,"You won ",t," because your opponent folded."),i.a.createElement("button",{onClick:this.onAcknowledgeClick},"Continue")):i.a.createElement("section",null,i.a.createElement("p",null,"You lost ",-t," by folding."),i.a.createElement("button",{onClick:this.onAcknowledgeClick},"Continue"))}},{key:"renderInitialBetMenu",value:function(e,t){return i.a.createElement("section",null,i.a.createElement("h3",null,"You are betting first."),i.a.createElement("label",{className:"BetMenuLabel"},"Strength: ",e.strength),i.a.createElement("label",{className:"BetMenuLabel"},"Your initial bet:"," ",i.a.createElement("input",{className:E(+e.betInputValue)&&+e.betInputValue>=t?"":"InvalidInput",type:"text",value:e.betInputValue,onChange:this.onBetInputValueChange}),i.a.createElement("input",{className:E(+e.betInputValue)&&+e.betInputValue>=t?"":"InvalidInput",type:"range",min:t,max:1,step:.001,value:+e.betInputValue,onChange:this.onBetInputValueChange})),i.a.createElement("button",{disabled:!(E(+e.betInputValue)&&+e.betInputValue>=t),onClick:this.onPlaceBetClick},"Place bet"))}},{key:"renderFollowingBetMenu",value:function(e){var t=e.opponentInitialBet;return i.a.createElement("section",null,i.a.createElement("h3",null,"You are betting second."),i.a.createElement("label",{className:"BetMenuLabel"},"Strength: ",e.strength),i.a.createElement("label",{className:"BetMenuLabel"},"Opponent's bet: ",t),i.a.createElement("label",{className:"BetMenuLabel"},"Your bet:"," ",i.a.createElement("input",{className:E(+e.betInputValue)&&+e.betInputValue>=t?"":"InvalidInput",type:"text",value:e.betInputValue,onChange:this.onBetInputValueChange}),i.a.createElement("input",{className:E(+e.betInputValue)&&+e.betInputValue>=t?"":"InvalidInput",type:"range",min:t,max:1,step:.001,value:+e.betInputValue,onChange:this.onBetInputValueChange})),i.a.createElement("button",{disabled:!(E(+e.betInputValue)&&+e.betInputValue>=t),onClick:this.onPlaceBetClick},"Place bet"),i.a.createElement("button",{onClick:this.onFoldClick},"Fold"))}},{key:"renderMaxBetMenu",value:function(e){return i.a.createElement("section",null,i.a.createElement("h3",null,"Your opponent raised."),i.a.createElement("label",{className:"BetMenuLabel"},"Strength: ",e.strength),i.a.createElement("label",{className:"BetMenuLabel"},"Your initial bet: ",e.initialBet),i.a.createElement("label",{className:"BetMenuLabel"},"Opponent's bet: ",e.followingBet),i.a.createElement("button",{onClick:this.onPlaceBetClick},"Call"),i.a.createElement("button",{onClick:this.onFoldClick},"Fold"))}},{key:"renderGraphMenu",value:function(e){var t=we(e);return i.a.createElement("div",{className:"App"},i.a.createElement("section",null,i.a.createElement("button",{onClick:this.onAgentListClick},"Back"),i.a.createElement("h2",null,"Graph")),i.a.createElement("label",null,"Agent:"," ",i.a.createElement("select",{value:e.graphedAgentName,onChange:this.onGraphedAgentNameChange},t.map((function(e){var t=e.name,n=e.agent;return i.a.createElement("option",{key:t,value:t},t," (",Q(n.agentType),")")})))),i.a.createElement("label",null,"Component:"," ",i.a.createElement("select",{value:e.graph.policyGraphType,onChange:this.onGraphTypeChange},i.a.createElement("option",{value:fe.Leader},"Leader"),i.a.createElement("option",{value:fe.Follower},"Follower"))),i.a.createElement("label",null,"Noise:"," ",i.a.createElement("input",{className:1===+e.noiseInputValue?"DiscouragedInput":E(+e.noiseInputValue)?"":"InvalidInput",type:"text",value:e.noiseInputValue,onChange:this.onGraphNoiseChange}),i.a.createElement("input",{className:E(+e.noiseInputValue)?"":"InvalidInput",type:"range",min:0,max:1,step:.001,value:e.graph.noise,onChange:this.onGraphNoiseChange})),i.a.createElement("table",null,i.a.createElement("tbody",null,i.a.createElement("tr",null,i.a.createElement("td",null,"Bet"),i.a.createElement("td",null,i.a.createElement("canvas",{className:"PolicyGraph",ref:this.graphCanvasRef}))),i.a.createElement("tr",null,i.a.createElement("td",null),i.a.createElement("td",null,"Strength")))),i.a.createElement("section",null,i.a.createElement("h3",null,"Key"),e.graph.policyGraphType===fe.Leader?i.a.createElement(i.a.Fragment,null,i.a.createElement("p",{className:"Key__InitialBet"},"Red = initial bet"),i.a.createElement("p",{className:"Key__UnclampedMaxBet"},"Green = unclamped max bet"),i.a.createElement("p",{className:"Key__ClampedMaxBet"},"Blue = clamped max bet = max(initial bet, unclamped max bet)")):i.a.createElement(i.a.Fragment,null,i.a.createElement("p",null,"Lighter = lower bet (white = 0)"),i.a.createElement("p",null,"Darker = higher bet (black = 1)"))))}},{key:"onOptionsClick",value:function(){var e,t=this.state,n={stateType:ue.Options,agents:t.agents,options:t.options,inputValues:(e=t.options,{trainingCycles:""+e.trainingCycles,trainingCycleOptions:{derivativeStep:""+e.trainingCycleOptions.derivativeStep,learningRate:""+e.trainingCycleOptions.learningRate,evaluationOptions:{hands:""+e.trainingCycleOptions.evaluationOptions.hands,ante:""+e.trainingCycleOptions.evaluationOptions.ante}}})};this.setState(n)}},{key:"onCreateAgentClick",value:function(){var e=this.expectState(ue.AgentList),t={stateType:ue.AgentCreation,agents:e.agents,options:e.options,agentType:U.Artichoke,agentCreationOptionInputValues:Be(X(U.Artichoke)),agentName:Se(e.agents.map((function(e){return e.name})))};this.setState(t)}},{key:"onDeleteAgentClick",value:function(){var e=this.expectState(ue.AgentList),t={stateType:ue.AgentDeletion,agents:e.agents,options:e.options,selectedAgentName:e.agents[0].name,isConfirmingDeletion:!1};this.setState(t)}},{key:"onEvaluateClick",value:function(){var e=this.expectState(ue.AgentList),t={stateType:ue.Evaluation,agents:e.agents,options:e.options,selectedAgentNames:e.agents.length>=2?[e.agents[0].name,e.agents[1].name]:[e.agents[0].name,e.agents[0].name],hasStartedEvaluation:!1,firstAgentReward:void 0};this.setState(t)}},{key:"onTrainClick",value:function(){var e=this.state,t={stateType:ue.TrainingAgentSelection,agents:e.agents,options:e.options,selectedAgentName:e.agents[0].name,opponentNames:[]};this.setState(t)}},{key:"onPlayClick",value:function(){var e=this.state,t=e.agents[0],n=e.options.trainingCycleOptions.evaluationOptions.ante,a={stateType:ue.Play,agents:e.agents,options:e.options,opponentName:t.name,reward:0,hands:0,betState:Me(t.agent,n),acknowledgeable:void 0};this.setState(a)}},{key:"onGraphClick",value:function(){var e=this.state,t=Math.random(),n={stateType:ue.Graph,agents:e.agents,options:e.options,graphedAgentName:e.agents[0].name,noiseInputValue:""+t,graph:{policyGraphType:fe.Leader,noise:t,inspectedPoint:void 0}};this.setState(n)}},{key:"onAgentListClick",value:function(){var e=this.state,t={stateType:ue.AgentList,agents:e.agents,options:e.options};this.setState(t)}},{key:"onTrainingCyclesInputValueChange",value:function(e){var t=this.expectState(ue.Options),n=e.target.value,a=Object(u.a)(Object(u.a)({},t.inputValues),{},{trainingCycles:n});if(m(+n)){var i=Object(u.a)(Object(u.a)({},t.options),{},{trainingCycles:+n});ke(i);var r=Object(u.a)(Object(u.a)({},t),{},{inputValues:a,options:i});this.setState(r)}else{var o=Object(u.a)(Object(u.a)({},t),{},{inputValues:a});this.setState(o)}}},{key:"onTrainingCycleDerivativeStepInputValueChange",value:function(e){var t=this.expectState(ue.Options),n=e.target.value,a=Object(u.a)(Object(u.a)({},t.inputValues),{},{trainingCycleOptions:Object(u.a)(Object(u.a)({},t.inputValues.trainingCycleOptions),{},{derivativeStep:n})});if(y(+n)){var i=Object(u.a)(Object(u.a)({},t.options),{},{trainingCycleOptions:Object(u.a)(Object(u.a)({},t.options.trainingCycleOptions),{},{derivativeStep:+n})});ke(i);var r=Object(u.a)(Object(u.a)({},t),{},{inputValues:a,options:i});this.setState(r)}else{var o=Object(u.a)(Object(u.a)({},t),{},{inputValues:a});this.setState(o)}}},{key:"onTrainingCycleLearningRateInputValueChange",value:function(e){var t=this.expectState(ue.Options),n=e.target.value,a=Object(u.a)(Object(u.a)({},t.inputValues),{},{trainingCycleOptions:Object(u.a)(Object(u.a)({},t.inputValues.trainingCycleOptions),{},{learningRate:n})});if(y(+n)){var i=Object(u.a)(Object(u.a)({},t.options),{},{trainingCycleOptions:Object(u.a)(Object(u.a)({},t.options.trainingCycleOptions),{},{learningRate:+n})});ke(i);var r=Object(u.a)(Object(u.a)({},t),{},{inputValues:a,options:i});this.setState(r)}else{var o=Object(u.a)(Object(u.a)({},t),{},{inputValues:a});this.setState(o)}}},{key:"onTrainingCycleEvaluationHandsInputValueChange",value:function(e){var t=this.expectState(ue.Options),n=e.target.value,a=Object(u.a)(Object(u.a)({},t.inputValues),{},{trainingCycleOptions:Object(u.a)(Object(u.a)({},t.inputValues.trainingCycleOptions),{},{evaluationOptions:Object(u.a)(Object(u.a)({},t.inputValues.trainingCycleOptions.evaluationOptions),{},{hands:n})})});if(m(+n)){var i=Object(u.a)(Object(u.a)({},t.options),{},{trainingCycleOptions:Object(u.a)(Object(u.a)({},t.options.trainingCycleOptions),{},{evaluationOptions:Object(u.a)(Object(u.a)({},t.options.trainingCycleOptions.evaluationOptions),{},{hands:+n})})});ke(i);var r=Object(u.a)(Object(u.a)({},t),{},{inputValues:a,options:i});this.setState(r)}else{var o=Object(u.a)(Object(u.a)({},t),{},{inputValues:a});this.setState(o)}}},{key:"onTrainingCycleEvaluationAnteInputValueChange",value:function(e){var t=this.expectState(ue.Options),n=e.target.value,a=Object(u.a)(Object(u.a)({},t.inputValues),{},{trainingCycleOptions:Object(u.a)(Object(u.a)({},t.inputValues.trainingCycleOptions),{},{evaluationOptions:Object(u.a)(Object(u.a)({},t.inputValues.trainingCycleOptions.evaluationOptions),{},{ante:n})})});if(E(+n)){var i=Object(u.a)(Object(u.a)({},t.options),{},{trainingCycleOptions:Object(u.a)(Object(u.a)({},t.options.trainingCycleOptions),{},{evaluationOptions:Object(u.a)(Object(u.a)({},t.options.trainingCycleOptions.evaluationOptions),{},{ante:+n})})});ke(i);var r=Object(u.a)(Object(u.a)({},t),{},{inputValues:a,options:i});this.setState(r)}else{var o=Object(u.a)(Object(u.a)({},t),{},{inputValues:a});this.setState(o)}}},{key:"onUseMainThreadChange",value:function(e){var t=this.expectState(ue.Options),n=Object(u.a)(Object(u.a)({},t.options),{},{useMainThreadForExpensiveComputation:e.target.checked});ke(n);var a=Object(u.a)(Object(u.a)({},t),{},{options:n});this.setState(a)}},{key:"onAgentNameChange",value:function(e){var t=this.expectState(ue.AgentCreation),n=Object(u.a)(Object(u.a)({},t),{},{agentName:e.target.value});this.setState(n)}},{key:"onAgentTypeChange",value:function(e){var t=this.expectState(ue.AgentCreation),n=+e.target.value;if(!(n in U))throw new Error("Unrecognized AgentType: "+n);var a=Object(u.a)(Object(u.a)({},t),{},{agentType:n,agentCreationOptionInputValues:Be(X(n))});this.setState(a)}},{key:"changeAgentCreationOptionInputValue",value:function(e,t){var n=this.expectState(ue.AgentCreation),a=Object(u.a)(Object(u.a)({},n),{},{agentCreationOptionInputValues:Object(u.a)(Object(u.a)({},n.agentCreationOptionInputValues),{},Object(s.a)({},e,t))});this.setState(a)}},{key:"onConfirmCreationClick",value:function(){var e=this.expectState(ue.AgentCreation),t={name:e.agentName,agent:$(e.agentType,Te(e.agentCreationOptionInputValues))};!function(e){var t=e.name,n=e.agent,a=localStorage.getItem(Ee.AgentNames),i=ee(null===a?[]:JSON.parse(a),t),r=JSON.stringify(i);localStorage.setItem(Ee.AgentNames,r);var o=Ce(new Uint8Array(n.toArrayBuffer()));localStorage.setItem(Ee.AgentPrefix+t,o)}(t);var n={stateType:ue.AgentList,agents:e.agents.concat([t]),options:e.options};this.setState(n)}},{key:"onFirstEvaluatedAgentNameChange",value:function(e){var t=this.expectState(ue.Evaluation),n=Object(u.a)(Object(u.a)({},t),{},{selectedAgentNames:[e.target.value,t.selectedAgentNames[1]]});this.setState(n)}},{key:"onSecondEvaluatedAgentNameChange",value:function(e){var t=this.expectState(ue.Evaluation),n=Object(u.a)(Object(u.a)({},t),{},{selectedAgentNames:[t.selectedAgentNames[0],e.target.value]});this.setState(n)}},{key:"onStartEvaluationClick",value:function(){var e=this,t=this.expectState(ue.Evaluation);if(!t.hasStartedEvaluation){var n=Object(u.a)(Object(u.a)({},t),{},{hasStartedEvaluation:!0});this.setState(n),le(ae(t.agents,t.selectedAgentNames[0]),ae(t.agents,t.selectedAgentNames[1]),t.options.trainingCycleOptions.evaluationOptions,t.options.useMainThreadForExpensiveComputation).then((function(n){var a=e.state;if(a.stateType===ue.Evaluation&&a.selectedAgentNames[0]===t.selectedAgentNames[0]&&a.selectedAgentNames[1]===t.selectedAgentNames[1]){var i=Object(u.a)(Object(u.a)({},a),{},{firstAgentReward:n});e.setState(i)}}))}}},{key:"onTraineeChange",value:function(e){var t=this.expectState(ue.TrainingAgentSelection),n=Object(u.a)(Object(u.a)({},t),{},{selectedAgentName:e.target.value});this.setState(n)}},{key:"setIsAgentUsedAsOpponent",value:function(e,t){var n=this.expectState(ue.TrainingAgentSelection),a=Object(u.a)(Object(u.a)({},n),{},{opponentNames:t?ee(n.opponentNames,e):te(n.opponentNames,e)});this.setState(a)}},{key:"onStartTrainingClick",value:function(){var e=this,t=this.expectState(ue.TrainingAgentSelection),n={stateType:ue.Training,agents:t.agents,options:t.options,cyclesCompleted:0,traineeName:t.selectedAgentName,opponentNames:t.opponentNames,relativeRewardLists:[],hasTrainingBeenTerminated:!1,terminateTraining:Ie};this.setState(n,(function(){return e.startTraining(t)}))}},{key:"startTraining",value:function(e){var t=this,n=Ne(e.agents,e.selectedAgentName),a=e.opponentNames.map((function(t){return Ne(e.agents,t)})),i=e.options;pe(n,a,i.trainingCycles,i.trainingCycleOptions,i.useMainThreadForExpensiveComputation,(function(a,i,r,o){var l=t.state;l.stateType===ue.Training&&l.traineeName===n.name&&ne(l.opponentNames,e.opponentNames)?t.setState((function(t){return t.stateType===ue.Training&&t.traineeName===n.name&&ne(t.opponentNames,e.opponentNames)?(a>=t.cyclesCompleted?function(e){var t=e.name,n=e.agent,a=Ce(new Uint8Array(n.toArrayBuffer()));localStorage.setItem(Ee.AgentPrefix+t,a)}(l=i):l=t.agents.find((function(e){return e.name===n.name})),Object(u.a)(Object(u.a)({},t),{},{agents:t.agents.map((function(e){return e.name===i.name?l:e})),cyclesCompleted:a+1,relativeRewardLists:je(t.relativeRewardLists,a,r),terminateTraining:o})):(o(),t);var l})):o()}))}},{key:"onTerminateTrainingClick",value:function(){var e=this.expectState(ue.Training);e.terminateTraining();var t=Object(u.a)(Object(u.a)({},e),{},{hasTrainingBeenTerminated:!0,terminateTraining:Ie});this.setState(t)}},{key:"onCancelAgentDeletionClick",value:function(){var e=this.expectState(ue.AgentDeletion),t=Object(u.a)(Object(u.a)({},e),{},{isConfirmingDeletion:!1});this.setState(t)}},{key:"onConfirmAgentDeletionClick",value:function(){var e=this.expectState(ue.AgentDeletion);!function(e){var t=localStorage.getItem(Ee.AgentNames),n=te(null===t?[]:JSON.parse(t),e),a=JSON.stringify(n);localStorage.setItem(Ee.AgentNames,a),localStorage.removeItem(Ee.AgentPrefix+e)}(e.selectedAgentName);var t={stateType:ue.AgentList,agents:e.agents.filter((function(t){return t.name!==e.selectedAgentName})),options:e.options};this.setState(t)}},{key:"onNameOfAgentToBeDeletedChange",value:function(e){var t=this.expectState(ue.AgentDeletion),n=Object(u.a)(Object(u.a)({},t),{},{selectedAgentName:e.target.value});this.setState(n)}},{key:"onSelectAgentForDeletionClick",value:function(){var e=this.expectState(ue.AgentDeletion),t=Object(u.a)(Object(u.a)({},e),{},{isConfirmingDeletion:!0});this.setState(t)}},{key:"onOpponentNameChange",value:function(e){var t=this.expectState(ue.Play),n=e.target.value;if(t.opponentName!==n){var a=ae(t.agents,n),i=t.options.trainingCycleOptions.evaluationOptions.ante,r={stateType:ue.Play,agents:t.agents,options:t.options,opponentName:n,reward:0,hands:0,betState:Me(a,i),acknowledgeable:void 0};this.setState(r)}}},{key:"onBetInputValueChange",value:function(e){var t=this.expectState(ue.Play);if(t.betState.betStateType===ge.Max)throw new Error("Impossible: state.betState.betInputValue does not exist on MaxBetState, and therefore cannot be changed.");var n=Object(u.a)(Object(u.a)({},t),{},{betState:Object(u.a)(Object(u.a)({},t.betState),{},{betInputValue:e.target.value})});this.setState(n)}},{key:"onPlaceBetClick",value:function(){var e=this.expectState(ue.Play),t=e.betState;switch(t.betStateType){case ge.Initial:this.placeInitialBet(e,t);break;case ge.Following:this.placeFollowingBet(e,t);break;case ge.Max:this.callFollowingBet(e,t)}}},{key:"placeInitialBet",value:function(e,t){var n=ae(e.agents,e.opponentName),a=e.options.trainingCycleOptions.evaluationOptions.ante,i=+t.betInputValue,r=t.opponentStrength,o=Math.max(a,n.follow(r,i,Math.random()));if(o>i){var l={betStateType:ge.Max,strength:t.strength,opponentStrength:r,initialBet:i,followingBet:o},s=Object(u.a)(Object(u.a)({},e),{},{betState:l});this.setState(s)}else if(o<i){var c=Object(u.a)(Object(u.a)({},e),{},{betState:Me(n,a),reward:e.reward+a,hands:e.hands+1,acknowledgeable:{acknowledgeableType:ve.Fold,reward:a}});this.setState(c)}else this.showdown(e,t,i)}},{key:"showdown",value:function(e,t,n){var a=ae(e.agents,e.opponentName),i=e.options.trainingCycleOptions.evaluationOptions.ante,r=t.strength,o=t.opponentStrength;if(r>o){var l=Object(u.a)(Object(u.a)({},e),{},{betState:Me(a,i),reward:e.reward+n,hands:e.hands+1,acknowledgeable:{acknowledgeableType:ve.Showdown,strength:r,opponentStrength:o,reward:n}});this.setState(l)}else if(r<o){var s=Object(u.a)(Object(u.a)({},e),{},{betState:Me(a,i),reward:e.reward-n,hands:e.hands+1,acknowledgeable:{acknowledgeableType:ve.Showdown,strength:r,opponentStrength:o,reward:-n}});this.setState(s)}else{var c=Object(u.a)(Object(u.a)({},e),{},{betState:Me(a,i),reward:e.reward,hands:e.hands+1,acknowledgeable:{acknowledgeableType:ve.Showdown,strength:r,opponentStrength:o,reward:0}});this.setState(c)}}},{key:"placeFollowingBet",value:function(e,t){var n=+t.betInputValue;if(n<t.opponentInitialBet){var a=e.options.trainingCycleOptions.evaluationOptions.ante;this.fold(e,a)}else{var i=t.opponentMaxBet,r=ae(e.agents,e.opponentName),o=e.options.trainingCycleOptions.evaluationOptions.ante;if(n>i){var l=Object(u.a)(Object(u.a)({},e),{},{betState:Me(r,o),hands:e.hands+1,reward:e.reward+o,acknowledgeable:{acknowledgeableType:ve.Fold,reward:o}});this.setState(l)}else this.showdown(e,t,n)}}},{key:"callFollowingBet",value:function(e,t){this.showdown(e,t,t.followingBet)}},{key:"onFoldClick",value:function(){var e=this.expectState(ue.Play),t=e.betState,n=e.options.trainingCycleOptions.evaluationOptions.ante;switch(t.betStateType){case ge.Initial:throw new Error("Impossible: Cannot fold during InitialBetState");case ge.Following:this.fold(e,n);break;case ge.Max:this.fold(e,t.initialBet)}}},{key:"fold",value:function(e,t){var n=ae(e.agents,e.opponentName),a=e.options.trainingCycleOptions.evaluationOptions.ante,i=Object(u.a)(Object(u.a)({},e),{},{hands:e.hands+1,reward:e.reward-t,betState:Me(n,a),acknowledgeable:{acknowledgeableType:ve.Fold,reward:-t}});this.setState(i)}},{key:"onAcknowledgeClick",value:function(){var e=this.expectState(ue.Play),t=Object(u.a)(Object(u.a)({},e),{},{acknowledgeable:void 0});this.setState(t)}},{key:"onGraphedAgentNameChange",value:function(e){var t=this.expectState(ue.Graph),n=Object(u.a)(Object(u.a)({},t),{},{graphedAgentName:e.target.value,graph:Object(u.a)(Object(u.a)({},t.graph),{},{inspectedPoint:void 0})});this.setState(n)}},{key:"onGraphTypeChange",value:function(e){var t=this.expectState(ue.Graph),n=+e.target.value,a=Object(u.a)(Object(u.a)({},t),{},{graph:{policyGraphType:n,noise:t.graph.noise,inspectedPoint:void 0}});this.setState(a)}},{key:"onGraphNoiseChange",value:function(e){var t=e.target.value,n=E(+t),a=this.expectState(ue.Graph),i=Object(u.a)(Object(u.a)({},a),{},{noiseInputValue:t,graph:Object(u.a)(Object(u.a)({},a.graph),{},{noise:n?+t:a.graph.noise})});this.setState(i)}}]),n}(i.a.Component);function we(e){return e.agents.slice().sort((function(e,t){return function(e,t){var n=0;for(;;){if(n>=e.length)return n>=t.length?0:-1;if(n>=t.length)return 1;var a=e.charCodeAt(n),i=t.charCodeAt(n),r=a-i;if(0!==r)return r;n++}}(e.name,t.name)}))}function Se(e){var t=["Ant","Alligator","Aardvark","Bison","Boar","Boa","Cougar","Crane","Crab","Duck","Dog","Deer","Egret","Elephant","Elk","Flamingo","Fox","Frog"];!function(e){for(var t=e.length-1;t>=1;t--){var n=(i=t+1,Math.floor(Math.random()*i)),a=e[t];e[t]=e[n],e[n]=a}var i}(t);for(var n=0,a=t;n<a.length;n++){var i=a[n];if(!e.includes(i))return i}for(var r=2;;){var o,s=Object(l.a)(t);try{for(s.s();!(o=s.n()).done;){var u=o.value+r;if(!e.includes(u))return u}}catch(c){s.e(c)}finally{s.f()}r++}}function Be(e){var t={};for(var n in e)t[n]=""+e[n];return t}function Te(e){var t={};for(var n in e)t[n]=+e[n];return t}function Ne(e,t){return{name:t,agent:ae(e,t)}}function Fe(e,t){var n,a=Object(l.a)(e);try{for(a.s();!(n=a.n()).done;){var i=n.value,r=i.opponentName,o=i.reward;if(r===t)return o}}catch(s){a.e(s)}finally{a.f()}throw new Error("Cannot find reward against agent named "+JSON.stringify(t)+". The only relative rewards provided were: "+JSON.stringify(e))}function je(e,t,n){var a=e.slice();return a[t]=n,a}function Me(e,t){return Math.random()>.5?function(e){return{betStateType:ge.Initial,strength:Math.random(),opponentStrength:Math.random(),betInputValue:Math.max(e,.5).toFixed(3)}}(t):function(e,t){var n=Math.random(),a=e.lead(n,Math.random()),i=Math.max(t,a[0]),r=Math.max(i,a[1]);return{betStateType:ge.Following,strength:Math.random(),opponentStrength:n,opponentInitialBet:i,opponentMaxBet:r,betInputValue:Math.max(i,.5).toFixed(3)}}(e,t)}function Ie(){}n(22),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(Oe,null)),document.getElementById("root")),window.encodeBytes=Ce,window.decodeBytes=Ae,window.deserializeAgent=K,window.evaluate=v,"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[16,1,2]]]);
//# sourceMappingURL=main.88fc684a.chunk.js.map